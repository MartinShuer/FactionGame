# 📱 WSL 本地构建 APK - 完整流程

## ✅ 您现在的状态：WSL 已安装

---

## 🎯 接下来的步骤：

### 📋 完整流程图

```
✅ 已完成：安装 WSL
    ↓
🔄 步骤 1：启用 WSL 功能（需要重启）
    ↓
📦 步骤 2：安装 Ubuntu 22.04
    ↓
⚙️ 步骤 3：配置构建环境（15-20分钟）
    ↓
🔨 步骤 4：构建 APK（30-50分钟）
    ↓
🎉 完成！APK 在桌面
```

---

## 🚀 现在请按顺序运行：

### 1️⃣ 启用 WSL 功能

**右键点击 → 以管理员身份运行：**
```
步骤1-启用WSL功能.bat
```

这个脚本会：
- ✅ 启用 WSL 子系统
- ✅ 启用虚拟机平台
- ✅ 设置 WSL2 为默认版本
- ⚠️ 需要重启电脑

**预计时间：** 2-3 分钟 + 重启

---

### 2️⃣ 安装 Ubuntu（重启后）

**双击运行：**
```
步骤2-安装Ubuntu.bat
```

这个脚本会：
- ✅ 下载并安装 Ubuntu 22.04 LTS
- ✅ 自动打开 Ubuntu 窗口
- ⚠️ 首次启动需要等待自动配置

**设置用户名和密码：**
```
Enter new UNIX username: martin
New password: [输入密码，不显示]
Retype new password: [再次输入]
```

**预计时间：** 5-10 分钟

---

### 3️⃣ 配置构建环境

**双击运行：**
```
步骤3-配置环境.bat
```

这个脚本会自动安装：
- Python 3
- Buildozer
- Android 构建工具
- 所有依赖包

**预计时间：** 15-20 分钟

---

### 4️⃣ 构建 APK

**双击运行：**
```
步骤4-构建APK.bat
```

这个脚本会：
- ✅ 下载 Android SDK (2-3 GB)
- ✅ 下载 NDK (1-2 GB)
- ✅ 编译应用
- ✅ 生成 APK
- ✅ 自动复制到桌面

**预计时间：** 30-50 分钟（首次）

---

## ⏰ 总时间估算

| 步骤 | 时间 | 需要做什么 |
|------|------|-----------|
| 步骤 1 | 3分钟 + 重启 | 运行脚本，重启 |
| 步骤 2 | 5-10分钟 | 设置用户名密码 |
| 步骤 3 | 15-20分钟 | 等待（自动） |
| 步骤 4 | 30-50分钟 | 等待（自动） |
| **总计** | **约 1-1.5 小时** | 大部分时间自动进行 |

---

## 💡 重要提示

### ✅ 需要准备：
- 管理员权限
- 稳定的网络连接（需要下载约 4-5 GB）
- 至少 10 GB 可用磁盘空间

### ⚠️ 注意事项：
1. **步骤 1 必须重启电脑**
2. **步骤 2 设置的密码要记住**（后续可能需要用）
3. **步骤 3 和 4 需要时间，不要关闭窗口**
4. **首次构建很慢，后续会快很多**

---

## 🐛 遇到问题？

### Q: 步骤 1 运行后重启了，但还是失败
A: 可能需要在 BIOS 中启用虚拟化（VT-x/AMD-V）

### Q: 步骤 2 下载很慢
A: 正常现象，Ubuntu 镜像比较大，耐心等待

### Q: 步骤 3 提示找不到命令
A: 手动打开 Ubuntu 应用，运行：
```bash
cd /mnt/c/Users/Martin/Desktop/FactionGame/android_version
bash 02-配置Ubuntu环境.sh
```

### Q: 步骤 4 构建失败
A: 查看错误信息，常见原因：
- 网络中断 → 重新运行脚本
- 磁盘空间不足 → 清理磁盘
- 依赖包问题 → 重新运行步骤 3

---

## 🎯 现在开始！

请按照顺序运行 4 个批处理文件：

1. **步骤1-启用WSL功能.bat**（管理员）
2. **步骤2-安装Ubuntu.bat**（重启后）
3. **步骤3-配置环境.bat**
4. **步骤4-构建APK.bat**

**当前状态：** 请运行 **步骤1-启用WSL功能.bat**

祝您构建顺利！🚀
